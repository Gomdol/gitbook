# 로그인 유지 - 쿠키, 세션, 세션 탈취



### **\[로그인 유지 - 쿠키]**

웹서버는 단순히 달라는 파일을 전달해주는 전달자라서

기본적으로는 달라는 친구가 누구인지 구분하지 못함.

&#x20;

구분하기 위하여 **클라이언트가 메세지를 보낼 때** 포스트잇에 "나 \*\*이야" 라고 알려주면, 그걸로 구분하여 보내준다.

&#x20;

저 포스트잇을 "<mark style="color:red;">**쿠키**</mark>"라고 한다.

&#x20;   Set-Cookie : 너 인정 (웹서버로 요청 보낼 때마다 쿠키 넣어서 보내)

&#x20;

초창기에는 이 쿠키로 로그인 시스템을 만들었는데,

문제는 <mark style="color:red;">**쿠키의 출발지가 클라이언트(이용자) 라는 것.**</mark>

**(해커도 클라이언트다.)**

&#x20;

쿠키의 내용을 바꿔서(변조) 다른 사람으로 로그인 할 수 있는 문제가 있다.

&#x20;

이를 해결하기 위해서 출발지를 서버로 하기로 한다. (정보를 서버에 저장)

&#x20;

### **\[로그인 유지 - 세션]**

세션은 서버에 저장되는 정보로, 이 세션 ID 정보를 통해 누가 누구인지 식별할 수 있게 된다.

&#x20;

session\_start();

$\_SESSION\['id'] = 'pooh';&#x20;

&#x20;

세션 스타트 : 세션을 사용하겠다.

세션 id값에 id를 저장한다. (=세션을 식별하기 위한 식별값을 만든다)

&#x20;

세션이 저장되는 위치

/var/lib/php/sessions

&#x20;

저장된 세션 값 확인 방법 :

&#x20; php -i | grep session.save\_path

&#x20; ls /var/lib/php/sessions

&#x20; cat /var/lib/php/sessions/위에서 나온 값

&#x20;

세션 ID는 쿠키에 들어간다.

<figure><img src="https://blog.kakaocdn.net/dn/bgUX6V/btsz6kqMkGf/Mh7KF8QeDAHkSghWyNsaZk/img.png" alt="" height="222" width="324"><figcaption></figcaption></figure>

&#x20;&#x20;

### **\[세션 탈취]**

쿠키를 잘 뜯어보면 세션 ID가 있다.

복사해서 쿠키에 넣고 그 페이지에 들어가면 로그인이 된다.

&#x20;

XSS, 웹 쉘, MitM 등 여러가지를 사용해서 세션아이디를 탈취 가능하다.
